<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Politie Academie - PV Training Actief</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <style>
        :root { --polblauw: #1d4e89; --goud: #f9d423; --bg: #f4f7f9; --fout: #e53e3e; --goed: #28a745; --tekst: #2d3748; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); padding: 20px; color: var(--tekst); }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .screen { display: none; }
        .active { display: block; }
        .zin-container { margin-bottom: 20px; padding: 15px; border-left: 5px solid var(--polblauw); background: #f8fafc; border-radius: 4px; }
        .is-goed { border-left-color: var(--goed) !important; background: #f0fff4; }
        .is-fout { border-left-color: var(--fout) !important; background: #fff5f5; }
        input[type="text"] { width: 100%; padding: 12px; margin-top: 10px; border: 1px solid #cbd5e0; border-radius: 4px; box-sizing: border-box; }
        .btn-main { background: var(--polblauw); color: white; width: 100%; padding: 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 1.1em; }
        .btn-check { padding: 10px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; color: white; flex: 1; }
        .sleutel-box { margin-top: 10px; padding: 10px; background: #e2e8f0; border-radius: 4px; display: none; font-weight: bold; }
        .admin-zone { margin-top: 40px; padding: 20px; border: 2px dashed var(--polblauw); background: #f0f7ff; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    </style>
</head>
<body>

<div class="container">
    <div id="login-screen" class="screen active">
        <h1 style="color:var(--polblauw); text-align:center;">PV-Training OVT</h1>
        <p style="text-align:center;">Herschrijf de voltooide zinnen naar de <strong>actieve verleden tijd</strong>.</p>
        <input type="text" id="student-naam" placeholder="Naam Verbalisant">
        <button onclick="startTraining()" class="btn-main" style="margin-top:20px;">START TRAINING</button>
    </div>

    <div id="input-screen" class="screen">
        <h2>Dossier Verwerking</h2>
        <div id="vragen-lijst"></div>
        <button onclick="verstuurZinnen()" class="btn-main">INLEVEREN</button>
    </div>

    <div id="wait-screen" class="screen">
        <h2 style="text-align:center;">Ingeleverd</h2>
        <p style="text-align:center;">Wacht op de docent voor de controle-fase.</p>
    </div>

    <div id="peer-screen" class="screen">
        <h2>Controle: <span id="review-naam"></span></h2>
        <div id="peer-lijst"></div>
    </div>

    <div class="admin-zone">
        <h4>Dashboard</h4>
        <button onclick="activeerNakijken()" style="background:var(--goed); color:white; padding:10px; border:none; border-radius:4px; cursor:pointer;">START NAKIJKEN</button>
        <button onclick="wisAlles()" style="background:var(--fout); color:white; padding:10px; border:none; border-radius:4px; cursor:pointer; margin-left:10px;">RESET</button>
        <table>
            <thead><tr><th>Naam</th><th>Score</th></tr></thead>
            <tbody id="score-body"></tbody>
        </table>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBj8dXkl1rEfyx54_MDy_tYd2P7kAeU8VQ",
        authDomain: "q2les3samirgem.firebaseapp.com",
        databaseURL: "https://q2les3samirgem-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "q2les3samirgem",
        storageBucket: "q2les3samirgem.firebasestorage.app",
        messagingSenderId: "8681998187",
        appId: "1:8681998187:web:fd08067494a010dc572e2e"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const zinnenPool = [
        {fout: "De dader heeft de tas weggenomen.", goed: "De dader nam de tas weg."},
        {fout: "De agent heeft de verdachte gefouilleerd.", goed: "De agent fouilleerde de verdachte."},
        {fout: "De recherche heeft de beelden geanalyseerd.", goed: "De recherche analyseerde de beelden."},
        {fout: "De getuige heeft de dader herkend.", goed: "De getuige herkende de dader."},
        {fout: "De verdachte heeft de diefstal ontkend.", goed: "De verdachte ontkende de diefstal."},
        {fout: "De verbalisant heeft de rechten voorgelezen.", goed: "De verbalisant las de rechten voor."},
        {fout: "De inbreker is via het dak geklommen.", goed: "De inbreker klom via het dak."},
        {fout: "De agent heeft de weg afgezet.", goed: "De agent zette de weg af."},
        {fout: "De politie heeft het bewijs veiliggesteld.", goed: "De politie stelde het bewijs veilig."},
        {fout: "De dader is via de achterdeur gevlucht.", goed: "De dader vluchtte via de achterdeur."},
        {fout: "De agent heeft de ruzie gesust.", goed: "De agent suste de ruzie."},
        {fout: "De officier heeft het rapport getekend.", goed: "De officier tekende het rapport."},
        {fout: "De eenheid heeft de dader achtervolgd.", goed: "De eenheid achtervolgde de dader."},
        {fout: "De inbreker heeft de kluis gekraakt.", goed: "De inbreker kraakte de kluis."},
        {fout: "De verbalisant heeft de aangifte getypt.", goed: "De verbalisant typte de aangifte."},
        {fout: "De agent heeft de situatie ingeschat.", goed: "De agent schatte de situatie in."},
        {fout: "De agent heeft zijn wapen getrokken.", goed: "De agent trok zijn wapen."},
        {fout: "De recherche heeft de sporen gezocht.", goed: "De recherche zocht de sporen."},
        {fout: "De verdachte heeft de wet overtreden.", goed: "De verdachte overtrad de wet."},
        {fout: "De dader is over het hek gesprongen.", goed: "De dader sprong over het hek."},
        {fout: "De verdachte heeft de ruit gebroken.", goed: "De verdachte brak de ruit."},
        {fout: "De dief is door de mand gevallen.", goed: "De dief viel door de mand."},
        {fout: "De agent heeft de dader gegrepen.", goed: "De agent greep de dader."},
        {fout: "De verdachte heeft de agent bedreigd.", goed: "De verdachte bedreigde de agent."},
        {fout: "De recherche heeft de beelden bekeken.", goed: "De recherche bekeek de beelden."}
    ];

    let mijnSelectie = [];
    let mijnId = "";
    let peerIdScore
